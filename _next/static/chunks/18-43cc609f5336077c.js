(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18],{7018:function(e,t,r){"use strict";var n=c(r(4779)),o=c(r(7294)),a=r(1987),i=c(r(1664)),u=c(r(1163));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){s(e,t,r[t])}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e}e.exports=function(e){return new d(e)};var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.Link,n=void 0===r?i.default:r,o=t.Router,a=void 0===o?u.default:o;f(this,e),this.routes=[],this.Link=this.getLink(n),this.Router=this.getRouter(a)}return h(e,[{key:"add",value:function(e,t,r){var n;if(e instanceof Object?e=(n=e).name:("/"===e[0]&&(r=t,t=e,e=null),n={name:e,pattern:t,page:r}),this.findByName(e))throw new Error('Route "'.concat(e,'" already exists'));return this.routes.push(new v(n)),this}},{key:"findByName",value:function(e){if(e)return this.routes.filter((function(t){return t.name===e}))[0]}},{key:"match",value:function(e){var t=(0,a.parse)(e,!0),r=t.pathname,n=t.query;return this.routes.reduce((function(e,t){if(e.route)return e;var o=t.match(r);return o?l({},e,{route:t,params:o,query:l({},n,o)}):e}),{query:n,parsedUrl:t})}},{key:"findAndGetUrls",value:function(e,t){var r=this.findByName(e);if(r)return{route:r,urls:r.getUrls(t),byName:!0};var n=this.match(e),o=n.route,a=n.query,i=o?o.getHref(a):e;return{route:o,urls:{href:i,as:e}}}},{key:"getRequestHandler",value:function(e,t){var r=this,n=e.getRequestHandler();return function(o,a){var i=r.match(o.url),u=i.route,c=i.query,l=i.parsedUrl;u?t?t({req:o,res:a,route:u,query:c}):e.render(o,a,u.page,c):n(o,a,l)}}},{key:"getLink",value:function(e){var t=this;return function(r){var n=r.route,a=r.params,i=r.to,u=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,["route","params","to"]),c=n||i;return c&&Object.assign(u,t.findAndGetUrls(c,a).urls),o.default.createElement(e,u)}}},{key:"getRouter",value:function(e){var t=this,r=function(r){return function(n,o,a){var i=t.findAndGetUrls(n,o),u=i.byName,c=i.urls,l=c.as,s=c.href;return e[r](s,l,u?a:o)}};return e.pushRoute=r("push"),e.replaceRoute=r("replace"),e.prefetchRoute=r("prefetch"),e}}]),e}(),v=function(){function e(t){var r=t.name,o=t.pattern,a=t.page,i=void 0===a?r:a;if(f(this,e),!r&&!i)throw new Error('Missing page to render for route "'.concat(o,'"'));this.name=r,this.pattern=o||"/".concat(r),this.page=i.replace(/(^|\/)index$/,"").replace(/^\/?/,"/"),this.regex=(0,n.default)(this.pattern,this.keys=[]),this.keyNames=this.keys.map((function(e){return e.name})),this.toPath=n.default.compile(this.pattern)}return h(e,[{key:"match",value:function(e){var t=this.regex.exec(e);if(t)return this.valuesToParams(t.slice(1))}},{key:"valuesToParams",value:function(e){var t=this;return e.reduce((function(e,r,n){return void 0===r?e:Object.assign(e,s({},t.keys[n].name,decodeURIComponent(r)))}),{})}},{key:"getHref",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(this.page,"?").concat(y(e))}},{key:"getAs",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.toPath(t)||"/",n=Object.keys(t),o=n.filter((function(t){return-1===e.keyNames.indexOf(t)}));if(!o.length)return r;var a=o.reduce((function(e,r){return Object.assign(e,s({},r,t[r]))}),{});return"".concat(r,"?").concat(y(a))}},{key:"getUrls",value:function(e){return{as:this.getAs(e),href:this.getHref(e)}}}]),e}(),y=function(e){return Object.keys(e).filter((function(t){return null!==e[t]&&void 0!==e[t]})).map((function(t){var r=e[t];return Array.isArray(r)&&(r=r.join("/")),[encodeURIComponent(t),encodeURIComponent(r)].join("=")})).join("&")}},1551:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,u=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(c){u=!0,o=c}finally{try{i||null==r.return||r.return()}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=r(7294))&&a.__esModule?a:{default:a},u=r(1003),c=r(880),l=r(9246);function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var f={};function p(e,t,r,n){if(e&&u.isLocalURL(t)){e.prefetch(t,r,n).catch((function(e){0}));var o=n&&"undefined"!==typeof n.locale?n.locale:e&&e.locale;f[t+"%"+r+(o?"%"+o:"")]=!0}}var h=i.default.forwardRef((function(e,t){var r,n=e.legacyBehavior,a=void 0===n?!0!==Boolean(!1):n,h=e.href,d=e.as,v=e.children,y=e.prefetch,m=e.passHref,g=e.replace,b=e.shallow,x=e.scroll,w=e.locale,j=e.onClick,O=e.onMouseEnter,k=s(e,["href","as","children","prefetch","passHref","replace","shallow","scroll","locale","onClick","onMouseEnter"]);r=v,a&&"string"===typeof r&&(r=i.default.createElement("a",null,r));var R,E=!1!==y,C=c.useRouter(),U=i.default.useMemo((function(){var e=o(u.resolveHref(C,h,!0),2),t=e[0],r=e[1];return{href:t,as:d?u.resolveHref(C,d):r||t}}),[C,h,d]),A=U.href,I=U.as,S=i.default.useRef(A),L=i.default.useRef(I);a&&(R=i.default.Children.only(r));var M=a?R&&"object"===typeof R&&R.ref:t,P=o(l.useIntersection({rootMargin:"200px"}),3),T=P[0],$=P[1],_=P[2],q=i.default.useCallback((function(e){L.current===I&&S.current===A||(_(),L.current=I,S.current=A),T(e),M&&("function"===typeof M?M(e):"object"===typeof M&&(M.current=e))}),[I,M,A,_,T]);i.default.useEffect((function(){var e=$&&E&&u.isLocalURL(A),t="undefined"!==typeof w?w:C&&C.locale,r=f[A+"%"+I+(t?"%"+t:"")];e&&!r&&p(C,A,I,{locale:t})}),[I,A,$,w,E,C]);var N={ref:q,onClick:function(e){a||"function"!==typeof j||j(e),a&&R.props&&"function"===typeof R.props.onClick&&R.props.onClick(e),e.defaultPrevented||function(e,t,r,n,o,a,i,c){("A"!==e.currentTarget.nodeName.toUpperCase()||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&u.isLocalURL(r))&&(e.preventDefault(),t[o?"replace":"push"](r,n,{shallow:a,locale:c,scroll:i}))}(e,C,A,I,g,b,x,w)},onMouseEnter:function(e){a||"function"!==typeof O||O(e),a&&R.props&&"function"===typeof R.props.onMouseEnter&&R.props.onMouseEnter(e),u.isLocalURL(A)&&p(C,A,I,{priority:!0})}};if(!a||m||"a"===R.type&&!("href"in R.props)){var H="undefined"!==typeof w?w:C&&C.locale,z=C&&C.isLocaleDomain&&u.getDomainLocale(I,H,C&&C.locales,C&&C.domainLocales);N.href=z||u.addBasePath(u.addLocale(I,H,C&&C.defaultLocale))}return a?i.default.cloneElement(R,N):i.default.createElement("a",Object.assign({},k,N),r)}));t.default=h,("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&(Object.assign(t.default,t),e.exports=t.default)},9246:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,u=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(c){u=!0,o=c}finally{try{i||null==r.return||r.return()}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.useIntersection=function(e){var t=e.rootRef,r=e.rootMargin,n=e.disabled||!u,s=a.useRef(),f=o(a.useState(!1),2),p=f[0],h=f[1],d=o(a.useState(t?t.current:null),2),v=d[0],y=d[1],m=a.useCallback((function(e){s.current&&(s.current(),s.current=void 0),n||p||e&&e.tagName&&(s.current=function(e,t,r){var n=function(e){var t,r={root:e.root||null,margin:e.rootMargin||""},n=l.find((function(e){return e.root===r.root&&e.margin===r.margin}));n?t=c.get(n):(t=c.get(r),l.push(r));if(t)return t;var o=new Map,a=new IntersectionObserver((function(e){e.forEach((function(e){var t=o.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)}))}),e);return c.set(r,t={id:r,observer:a,elements:o}),t}(r),o=n.id,a=n.observer,i=n.elements;return i.set(e,t),a.observe(e),function(){if(i.delete(e),a.unobserve(e),0===i.size){a.disconnect(),c.delete(o);var t=l.findIndex((function(e){return e.root===o.root&&e.margin===o.margin}));t>-1&&l.splice(t,1)}}}(e,(function(e){return e&&h(e)}),{root:v,rootMargin:r}))}),[n,v,r,p]),g=a.useCallback((function(){h(!1)}),[]);return a.useEffect((function(){if(!u&&!p){var e=i.requestIdleCallback((function(){return h(!0)}));return function(){return i.cancelIdleCallback(e)}}}),[p]),a.useEffect((function(){t&&y(t.current)}),[t]),[m,p,g]};var a=r(7294),i=r(4686),u="undefined"!==typeof IntersectionObserver;var c=new Map,l=[];("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&(Object.assign(t.default,t),e.exports=t.default)},1987:function(e,t,r){!function(){var t={477:function(e){"use strict";e.exports=r(7879)}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}},i=!0;try{t[e](a,a.exports,o),i=!1}finally{i&&delete n[e]}return a.exports}o.ab="//";var a={};!function(){var e,t=a,r=(e=o(477))&&"object"==typeof e&&"default"in e?e.default:e,n=/https?|ftp|gopher|file/;function i(e){"string"==typeof e&&(e=b(e));var t=function(e,t,r){var n=e.auth,o=e.hostname,a=e.protocol||"",i=e.pathname||"",u=e.hash||"",c=e.query||"",l=!1;n=n?encodeURIComponent(n).replace(/%3A/i,":")+"@":"",e.host?l=n+e.host:o&&(l=n+(~o.indexOf(":")?"["+o+"]":o),e.port&&(l+=":"+e.port)),c&&"object"==typeof c&&(c=t.encode(c));var s=e.search||c&&"?"+c||"";return a&&":"!==a.substr(-1)&&(a+=":"),e.slashes||(!a||r.test(a))&&!1!==l?(l="//"+(l||""),i&&"/"!==i[0]&&(i="/"+i)):l||(l=""),u&&"#"!==u[0]&&(u="#"+u),s&&"?"!==s[0]&&(s="?"+s),{protocol:a,host:l,pathname:i=i.replace(/[?#]/g,encodeURIComponent),search:s=s.replace("#","%23"),hash:u}}(e,r,n);return""+t.protocol+t.host+t.pathname+t.search+t.hash}var u="http://",c="w.w",l=u+c,s=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,f=/https?|ftp|gopher|file/;function p(e,t){var r="string"==typeof e?b(e):e;e="object"==typeof e?i(e):e;var n=b(t),o="";r.protocol&&!r.slashes&&(o=r.protocol,e=e.replace(r.protocol,""),o+="/"===t[0]||"/"===e[0]?"/":""),o&&n.protocol&&(o="",n.slashes||(o=n.protocol,t=t.replace(n.protocol,"")));var a=e.match(s);a&&!n.protocol&&(e=e.substr((o=a[1]+(a[2]||"")).length),/^\/\/[^/]/.test(t)&&(o=o.slice(0,-1)));var c=new URL(e,l+"/"),p=new URL(t,c).toString().replace(l,""),h=n.protocol||r.protocol;return h+=r.slashes||n.slashes?"//":"",!o&&h?p=p.replace(u,h):o&&(p=p.replace(u,"")),f.test(p)||~t.indexOf(".")||"/"===e.slice(-1)||"/"===t.slice(-1)||"/"!==p.slice(-1)||(p=p.slice(0,-1)),o&&(p=o+("/"===p[0]?p.substr(1):p)),p}function h(){}h.prototype.parse=b,h.prototype.format=i,h.prototype.resolve=p,h.prototype.resolveObject=p;var d=/^https?|ftp|gopher|file/,v=/^(.*?)([#?].*)/,y=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,m=/^([a-z0-9.+-]*:)?\/\/\/*/i,g=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function b(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),e&&"object"==typeof e&&e instanceof h)return e;var o=(e=e.trim()).match(v);e=o?o[1].replace(/\\/g,"/")+o[2]:e.replace(/\\/g,"/"),g.test(e)&&"/"!==e.slice(-1)&&(e+="/");var a=!/(^javascript)/.test(e)&&e.match(y),u=m.test(e),s="";a&&(d.test(a[1])||(s=a[1].toLowerCase(),e=""+a[2]+a[3]),a[2]||(u=!1,d.test(a[1])?(s=a[1],e=""+a[3]):e="//"+a[3]),3!==a[2].length&&1!==a[2].length||(s=a[1],e="/"+a[3]));var f,p=(o?o[1]:e).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),b=p&&p[1],x=new h,w="",j="";try{f=new URL(e)}catch(t){w=t,s||n||!/^\/\//.test(e)||/^\/\/.+[@.]/.test(e)||(j="/",e=e.substr(1));try{f=new URL(e,l)}catch(e){return x.protocol=s,x.href=s,x}}x.slashes=u&&!j,x.host=f.host===c?"":f.host,x.hostname=f.hostname===c?"":f.hostname.replace(/(\[|\])/g,""),x.protocol=w?s||null:f.protocol,x.search=f.search.replace(/\\/g,"%5C"),x.hash=f.hash.replace(/\\/g,"%5C");var O=e.split("#");!x.search&&~O[0].indexOf("?")&&(x.search="?"),x.hash||""!==O[1]||(x.hash="#"),x.query=t?r.decode(f.search.substr(1)):x.search.substr(1),x.pathname=j+(a?function(e){return e.replace(/['^|`]/g,(function(e){return"%"+e.charCodeAt().toString(16).toUpperCase()})).replace(/((?:%[0-9A-F]{2})+)/g,(function(e,t){try{return decodeURIComponent(t).split("").map((function(e){var t=e.charCodeAt();return t>256||/^[a-z0-9]$/i.test(e)?e:"%"+t.toString(16).toUpperCase()})).join("")}catch(e){return t}}))}(f.pathname):f.pathname),"about:"===x.protocol&&"blank"===x.pathname&&(x.protocol="",x.pathname=""),w&&"/"!==e[0]&&(x.pathname=x.pathname.substr(1)),s&&!d.test(s)&&"/"!==e.slice(-1)&&"/"===x.pathname&&(x.pathname=""),x.path=x.pathname+x.search,x.auth=[f.username,f.password].map(decodeURIComponent).filter(Boolean).join(":"),x.port=f.port,b&&!x.host.endsWith(b)&&(x.host+=b,x.port=b.slice(1)),x.href=j?""+x.pathname+x.search+x.hash:i(x);var k=/^(file)/.test(x.href)?["host","hostname"]:[];return Object.keys(x).forEach((function(e){~k.indexOf(e)||(x[e]=x[e]||null)})),x}t.parse=b,t.format=i,t.resolve=p,t.resolveObject=function(e,t){return b(p(e,t))},t.Url=h}(),e.exports=a}()},7879:function(e){!function(){"use strict";var t={540:function(e){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,o,a){n=n||"&",o=o||"=";var i={};if("string"!==typeof e||0===e.length)return i;var u=/\+/g;e=e.split(n);var c=1e3;a&&"number"===typeof a.maxKeys&&(c=a.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var s=0;s<l;++s){var f,p,h,d,v=e[s].replace(u,"%20"),y=v.indexOf(o);y>=0?(f=v.substr(0,y),p=v.substr(y+1)):(f=v,p=""),h=decodeURIComponent(f),d=decodeURIComponent(p),t(i,h)?r(i[h])?i[h].push(d):i[h]=[i[h],d]:i[h]=d}return i};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},128:function(e){var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,a,i,u){return a=a||"&",i=i||"=",null===e&&(e=void 0),"object"===typeof e?n(o(e),(function(o){var u=encodeURIComponent(t(o))+i;return r(e[o])?n(e[o],(function(e){return u+encodeURIComponent(t(e))})).join(a):u+encodeURIComponent(t(e[o]))})).join(a):u?encodeURIComponent(t(u))+i+encodeURIComponent(t(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var a=r[e]={exports:{}},i=!0;try{t[e](a,a.exports,n),i=!1}finally{i&&delete r[e]}return a.exports}n.ab="//";var o={};!function(){var e=o;e.decode=e.parse=n(540),e.encode=e.stringify=n(128)}(),e.exports=o}()},1664:function(e,t,r){e.exports=r(1551)},1163:function(e,t,r){e.exports=r(880)},4779:function(e){e.exports=c,e.exports.parse=r,e.exports.compile=function(e,t){return n(r(e,t))},e.exports.tokensToFunction=n,e.exports.tokensToRegExp=u;var t=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function r(e,r){for(var n,i=[],u=0,c=0,l="",s=r&&r.delimiter||"/",f=r&&r.delimiters||"./",p=!1;null!==(n=t.exec(e));){var h=n[0],d=n[1],v=n.index;if(l+=e.slice(c,v),c=v+h.length,d)l+=d[1],p=!0;else{var y="",m=e[c],g=n[2],b=n[3],x=n[4],w=n[5];if(!p&&l.length){var j=l.length-1;f.indexOf(l[j])>-1&&(y=l[j],l=l.slice(0,j))}l&&(i.push(l),l="",p=!1);var O=""!==y&&void 0!==m&&m!==y,k="+"===w||"*"===w,R="?"===w||"*"===w,E=y||s,C=b||x;i.push({name:g||u++,prefix:y,delimiter:E,optional:R,repeat:k,partial:O,pattern:C?a(C):"[^"+o(E)+"]+?"})}}return(l||c<e.length)&&i.push(l+e.substr(c)),i}function n(e){for(var t=new Array(e.length),r=0;r<e.length;r++)"object"===typeof e[r]&&(t[r]=new RegExp("^(?:"+e[r].pattern+")$"));return function(r,n){for(var o="",a=n&&n.encode||encodeURIComponent,i=0;i<e.length;i++){var u=e[i];if("string"!==typeof u){var c,l=r?r[u.name]:void 0;if(Array.isArray(l)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but got array');if(0===l.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var s=0;s<l.length;s++){if(c=a(l[s],u),!t[i].test(c))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'"');o+=(0===s?u.prefix:u.delimiter)+c}}else if("string"!==typeof l&&"number"!==typeof l&&"boolean"!==typeof l){if(!u.optional)throw new TypeError('Expected "'+u.name+'" to be '+(u.repeat?"an array":"a string"));u.partial&&(o+=u.prefix)}else{if(c=a(String(l),u),!t[i].test(c))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but got "'+c+'"');o+=u.prefix+c}}else o+=u}return o}}function o(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function a(e){return e.replace(/([=!:$/()])/g,"\\$1")}function i(e){return e&&e.sensitive?"":"i"}function u(e,t,r){for(var n=(r=r||{}).strict,a=!1!==r.start,u=!1!==r.end,c=o(r.delimiter||"/"),l=r.delimiters||"./",s=[].concat(r.endsWith||[]).map(o).concat("$").join("|"),f=a?"^":"",p=0===e.length,h=0;h<e.length;h++){var d=e[h];if("string"===typeof d)f+=o(d),p=h===e.length-1&&l.indexOf(d[d.length-1])>-1;else{var v=d.repeat?"(?:"+d.pattern+")(?:"+o(d.delimiter)+"(?:"+d.pattern+"))*":d.pattern;t&&t.push(d),d.optional?d.partial?f+=o(d.prefix)+"("+v+")?":f+="(?:"+o(d.prefix)+"("+v+"))?":f+=o(d.prefix)+"("+v+")"}}return u?(n||(f+="(?:"+c+")?"),f+="$"===s?"$":"(?="+s+")"):(n||(f+="(?:"+c+"(?="+s+"))?"),p||(f+="(?="+c+"|"+s+")")),new RegExp(f,i(r))}function c(e,t,n){return e instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return e}(e,t):Array.isArray(e)?function(e,t,r){for(var n=[],o=0;o<e.length;o++)n.push(c(e[o],t,r).source);return new RegExp("(?:"+n.join("|")+")",i(r))}(e,t,n):function(e,t,n){return u(r(e,n),t,n)}(e,t,n)}}}]);