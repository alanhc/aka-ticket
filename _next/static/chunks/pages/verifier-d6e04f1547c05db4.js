(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[297],{3661:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verifier",function(){return e(1494)}])},4547:function(n,t,e){"use strict";e.d(t,{Z:function(){return p}});var r=e(5893),c=e(4051),u=e.n(c),s=e(262),o=e(7294),i=e(6489);function a(n,t,e,r,c,u,s){try{var o=n[u](s),i=o.value}catch(a){return void e(a)}o.done?t(i):Promise.resolve(i).then(r,c)}function f(n){return function(){var t=this,e=arguments;return new Promise((function(r,c){var u=n.apply(t,e);function s(n){a(u,r,c,s,o,"next",n)}function o(n){a(u,r,c,s,o,"throw",n)}s(void 0)}))}}function l(n){var t=(0,o.useState)(null),e=t[0],c=t[1],a=function(){var n=f(u().mark((function n(){var t,e,r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,i.GS)();case 2:t=n.sent,e=t.success,r=t.wallet,console.log("connecting..",r,e),c(r);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),l=function(){var n=f(u().mark((function n(){var t,e,r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,i.iy)();case 2:t=n.sent,e=t.success,r=t.wallet,console.log("disconnect..",r,e),c(r);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,r.jsxs)("div",{children:[(0,r.jsx)(s.Link,{route:"/verifier",children:(0,r.jsx)("a",{className:"btn",children:"Verifier"})}),(0,r.jsx)(s.Link,{route:"/user",children:(0,r.jsx)("a",{className:"btn",children:"User"})}),(0,r.jsx)(s.Link,{route:"#",children:(0,r.jsx)("a",{className:"btn",onClick:e?l:a,children:e?e.slice(0,4)+"..."+e.slice(e.length-4,e.length):"Connect wallet"})})]})}var p=function(n){var t=n.children;return(0,r.jsxs)("div",{className:" flex flex-col items-center justify-between",children:[(0,r.jsx)(l,{}),t]})}},1494:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return p}});var r=e(5893),c=e(4547),u=e(4051),s=e.n(u),o=e(7283),i=e(7294),a=e(3866);function f(n,t,e,r,c,u,s){try{var o=n[u](s),i=o.value}catch(a){return void e(a)}o.done?t(i):Promise.resolve(i).then(r,c)}function l(n){var t=(0,i.useState)("No result"),e=t[0],c=t[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.T,{className:"w-full",constraints:{facingMode:"environment"},onResult:function(){var n,t=(n=s().mark((function n(t,e){var r,u;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=8;break}return r=JSON.parse(t.text),console.log("verify:",r),n.next=5,(0,a.DD)(r.otp,r.address,r.contract,r.tokenId);case 5:u=n.sent,console.log("verify_result:",u),c(u.data);case 8:e&&console.info(e);case 9:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,c){var u=n.apply(t,e);function s(n){f(u,r,c,s,o,"next",n)}function o(n){f(u,r,c,s,o,"throw",n)}s(void 0)}))});return function(n,e){return t.apply(this,arguments)}}()}),(0,r.jsx)("p",{children:e})]})}function p(){return(0,r.jsxs)(c.Z,{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold underline",children:"verifier"}),(0,r.jsx)(l,{})]})}},262:function(n,t,e){"use strict";var r=e(7018)();n.exports=r},3866:function(n,t,e){"use strict";e.d(t,{DD:function(){return p},H7:function(){return l},bG:function(){return f}});var r=e(4051),c=e.n(r),u=e(9669),s=e.n(u);function o(n,t,e,r,c,u,s){try{var o=n[u](s),i=o.value}catch(a){return void e(a)}o.done?t(i):Promise.resolve(i).then(r,c)}function i(n){return function(){var t=this,e=arguments;return new Promise((function(r,c){var u=n.apply(t,e);function s(n){o(u,r,c,s,i,"next",n)}function i(n){o(u,r,c,s,i,"throw",n)}s(void 0)}))}}console.log("backend url: http://140.112.30.39:5000");var a=s().create({baseURL:"http://140.112.30.39:5000"}),f=function(){var n=i(c().mark((function n(t){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.get("/ticket/".concat(t)).then((function(n){return n.data}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),l=function(){var n=i(c().mark((function n(t,e,r,u,o){var i,a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=JSON.stringify({signature:"".concat(o),message:"12345678"}),a={method:"post",url:"".concat("http://140.112.30.39:5000","/activate/").concat(t,"/").concat(e,"/").concat(r,"/").concat(u),headers:{"Content-Type":"application/json"},data:i},n.next=4,s()(a).then((function(n){return console.log("---success",n),n})).catch((function(n){return console.log("---err",n.response.status,n.response,{address:t,contract:e,ticketid:r,cnt:u,signature:o}),n.response}));case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})));return function(t,e,r,c,u){return n.apply(this,arguments)}}(),p=function(){var n=i(c().mark((function n(t,e,r,u){var o,i;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=JSON.stringify({otp:t,address:e}),i={method:"post",url:"".concat("http://140.112.30.39:5000","/verify/").concat(r,"/").concat(u),headers:{"Content-Type":"application/json"},data:o},n.next=4,s()(i).then((function(n){return console.log("---success",n),n})).catch((function(n){return console.log("---err",n.response.status,n.response),n.response}));case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})));return function(t,e,r,c){return n.apply(this,arguments)}}()},6489:function(n,t,e){"use strict";e.d(t,{GS:function(){return l},gU:function(){return f},iy:function(){return p}});var r=e(4051),c=e.n(r),u=e(2813);function s(n,t,e,r,c,u,s){try{var o=n[u](s),i=o.value}catch(a){return void e(a)}o.done?t(i):Promise.resolve(i).then(r,c)}function o(n){return function(){var t=this,e=arguments;return new Promise((function(r,c){var u=n.apply(t,e);function o(n){s(u,r,c,o,i,"next",n)}function i(n){s(u,r,c,o,i,"throw",n)}o(void 0)}))}}var i=e(9188).td.MAINNET,a={name:"NFT",iconUrl:"https://tezostaquito.io/img/favicon.png",preferredNetwork:i},f=new u.kx(a),l=(function(){var n=o(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.client.getActiveAccount();case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))}(),function(){var n=o(c().mark((function n(){var t;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.client.getActiveAccount();case 2:if(t=n.sent){n.next=9;break}return n.next=6,f.requestPermissions({network:{type:i}});case 6:return n.next=8,f.client.getActiveAccount();case 8:t=n.sent;case 9:return n.abrupt("return",{success:!0,wallet:t.address});case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()),p=function(){var n=o(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.clearActiveAccount();case 2:return n.abrupt("return",{success:!0,wallet:null});case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();!function(){var n=o(c().mark((function n(t){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.client.getActiveAccount();case 3:if(n.sent){n.next=7;break}return n.next=7,t.client.requestPermissions({type:{network:i}});case 7:return n.abrupt("return",{success:!0});case 10:return n.prev=10,n.t0=n.catch(0),n.abrupt("return",{success:!1,error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))}()},5883:function(){},6601:function(){},9214:function(){},5992:function(){},2361:function(){},4616:function(){}},function(n){n.O(0,[78,714,572,861,738,925,669,774,888,179],(function(){return t=3661,n(n.s=t);var t}));var t=n.O();_N_E=t}]);